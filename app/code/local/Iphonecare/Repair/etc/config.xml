<?xml version="1.0"?>
    <config>
        <modules>
            <Iphonecare_Repair>
                <version>0.5.1</version>
            </Iphonecare_Repair>
        </modules>
        <global>
            <models>
                <iphonecarerepair>
                    <class>Iphonecare_Repair_Model</class>
                    <resourceModel>iphonecarerepair_resource</resourceModel>
                </iphonecarerepair>

                <iphonecarerepair_resource>
                    <class>Iphonecare_Repair_Model_Resource</class>
                    <entities>
                        <stores>
                            <table>iphonecarerepair_stores</table>
                        </stores>
                    </entities>
                </iphonecarerepair_resource>
            </models>
            <blocks>
                <iphonecarerepair>
                    <class>Iphonecare_Repair_Block</class>
                </iphonecarerepair>
                <checkout>
                    <rewrite>
                        <onepage_success>Iphonecare_Repair_Block_Onepage_Success</onepage_success>
                    </rewrite>
                </checkout>
            </blocks>
            <resources>
                <iphonecarerepair_setup>
                    <setup>
                        <module>Iphonecare_Repair</module>
                        <class>Iphonecare_Repair_Model_Resource_Setup</class>
                    </setup>
                </iphonecarerepair_setup>
            </resources>
            <fieldsets>
                <sales_convert_quote>
                    <repair_imei>
                        <to_order>*</to_order>
                    </repair_imei>
                    <repair_problem>
                        <to_order>*</to_order>
                    </repair_problem>
                    <repair_pincode>
                        <to_order>*</to_order>
                    </repair_pincode>
                    <repair_screencode>
                        <to_order>*</to_order>
                    </repair_screencode>
                    <repair_extracodes>
                        <to_order>*</to_order>
                    </repair_extracodes>
                    <repair_isrepair>
                        <to_order>*</to_order>
                    </repair_isrepair>
                </sales_convert_quote>
                <sales_convert_order>
                    <repair_imei>
                        <to_quote>*</to_quote>
                    </repair_imei>
                    <repair_problem>
                        <to_quote>*</to_quote>
                    </repair_problem>
                    <repair_pincode>
                        <to_quote>*</to_quote>
                    </repair_pincode>
                    <repair_screencode>
                        <to_quote>*</to_quote>
                    </repair_screencode>
                    <repair_extracodes>
                        <to_quote>*</to_quote>
                    </repair_extracodes>
                    <repair_isrepair>
                        <to_quote>*</to_quote>
                    </repair_isrepair>
                </sales_convert_order>
                <sales_convert_quote_item>
                    <repair_imei>
                        <to_order_item>*</to_order_item>
                    </repair_imei>
                    <repair_problem>
                        <to_order_item>*</to_order_item>
                    </repair_problem>
                    <repair_screencode>
                        <to_order_item>*</to_order_item>
                    </repair_screencode>
                    <repair_shipping>
                        <to_order_item>*</to_order_item>
                    </repair_shipping>
                    <repair_store>
                        <to_order_item>*</to_order_item>
                    </repair_store>
                </sales_convert_quote_item>
            </fieldsets>
            <events>
                <sales_quote_add_item>
                    <observers>
                        <iphonecarerepair_sales_quote_item>
                            <type>singleton</type>
                            <class>iphonecarerepair/observer</class>
                            <method>addProductToQuote</method>
                        </iphonecarerepair_sales_quote_item>
                    </observers>
                </sales_quote_add_item>
                <checkout_type_onepage_save_order_after>
                    <observers>
                        <iphonecarerepair_checkout_type_onepage_save_order_after>
                            <type>singleton</type>
                            <class>iphonecarerepair/observer</class>
                            <method>addOrderToSession</method>
                        </iphonecarerepair_checkout_type_onepage_save_order_after>
                    </observers>
                </checkout_type_onepage_save_order_after>
                <!--<catalog_product_save_after>-->
                    <!--<observers>-->
                        <!--<sales_quote>-->
                            <!--<type>Singelton</type>-->
                            <!--<class>iphonecarerepair/Observer</class>-->
                            <!--<method>catalogProductSaveAfter</method>-->
                        <!--</sales_quote>-->
                    <!--</observers>-->
                <!--</catalog_product_save_after>-->
            </events>
        </global>

    <default>
        <carriers>
            <iphonecarerepair>
                <active>1</active>
                <model>iphonecarerepair/carrier</model>
                <sort_order>10</sort_order>
                <title>Repair shipping</title>
                <sallowspecific>0</sallowspecific>
            </iphonecarerepair>
        </carriers>
    </default>

        <frontend>
            <!--<events>
            <page_block_html_topmenu_gethtml_before>
                <observers>
                    <iphonecarerepair>       
                        <type>Singelton</type>               
                        <class>Iphonecare_Repair_Model_Observer</class>
                        <method>addToTopmenu</method>
                    </iphonecarerepair>
                </observers>
            </page_block_html_topmenu_gethtml_before>
        </events> -->
            <layout>
                <updates>
                    <iphonecarerepair>
                        <file>iphonecarerepair.xml</file>
                    </iphonecarerepair>
                </updates>
            </layout>
            <routers>
                <iphonecarerepair>
                    <use>standard</use>
                    <args>
                        <module>Iphonecare_Repair</module>
                        <frontName>repair-device</frontName>
                    </args>
                </iphonecarerepair>
            </routers>
            <translate>
                <modules>
                    <translations>
                        <files>
                            <default>Iphonecarerepair_Repair.csv</default>
                        </files>
                    </translations>
                </modules>
            </translate>
        </frontend>
        <adminhtml>
            <layout>
                <updates>
                    <iphonecarerepair>
                        <file>iphonecarerepair.xml</file>
                    </iphonecarerepair>
                </updates>
            </layout>
            <events>
                <core_block_abstract_prepare_layout_before>
                    <observers>
                        <iphonecarerepair>
                            <type>Singelton</type>
                            <class>iphonecarerepair/Observer</class>
                            <method>appendCustomColumn</method>
                        </iphonecarerepair>
                    </observers>
                </core_block_abstract_prepare_layout_before>
                <core_block_abstract_to_html_after>
                    <observers>
                        <mymodule_custom_order_view_info>
                            <class>iphonecarerepair/observer</class>
                            <method>getSalesOrderViewInfo</method>
                        </mymodule_custom_order_view_info>
                    </observers>
                </core_block_abstract_to_html_after>
            </events>
        </adminhtml>
    </config>